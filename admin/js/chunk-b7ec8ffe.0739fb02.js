(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b7ec8ffe"],{3330:function(e,t,n){"use strict";n("ac6a"),n("c5f6"),n("8e6e"),n("456d");var i=n("ade3"),r=n("5880");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var a={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.mapGetters)(["permissionToken"])),methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every((function(t){return e.listObj[t].hasSuccess}))},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map((function(t){return e.listObj[t]}));this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(e,t){for(var n=t.uid,i=Object.keys(this.listObj),r=0,o=i.length;r<o;r++)if(this.listObj[i[r]].uid===n)return this.listObj[i[r]].url=e.data.url,void(this.listObj[i[r]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,n=Object.keys(this.listObj),i=0,r=n.length;i<r;i++)if(this.listObj[n[i]].uid===t)return void delete this.listObj[n[i]]},beforeUpload:function(e){var t=this,n=window.URL||window.webkitURL,i=e.uid;return this.listObj[i]={},new Promise((function(r,o){var a=new Image;a.src=n.createObjectURL(e),a.onload=function(){t.listObj[i]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},r(!0)}))}}},s=(n("cb8f"),n("0c7c")),c=Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload-container"},[n("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n        upload\n    ")]),n("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,headers:{Authorization:e.permissionToken.access_token},action:e.baseURL+"/cms/file","list-type":"picture-card"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("\n                Click upload\n            ")])],1),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("\n            Cancel\n        ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n            Confirm\n        ")])],1)],1)}),[],!1,null,"8a45292a",null).exports,l=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],u=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fontsizeselect fontselect fullscreen"];n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54");function d(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var f=[];var m=function(e,t){var n=document.getElementById(e),i=t||function(){};if(!n){var r=document.createElement("script");r.src=e,r.id=e,document.body.appendChild(r),f.push(i),("onload"in r?function(t){t.onload=function(){this.onerror=this.onload=null;var e,n=d(f);try{for(n.s();!(e=n.n()).done;){(0,e.value)(null,t)}}catch(e){n.e(e)}finally{n.f()}f=null},t.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+e),t)}}:function(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t,n=d(f);try{for(n.s();!(t=n.n()).done;){(0,t.value)(null,e)}}catch(e){n.e(e)}finally{n.f()}f=null}}})(r)}n&&i&&(window.tinymce?i(null,n):f.push(i))},h={name:"Tinymce",components:{editorImage:c},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?"".concat(e,"px"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;m("https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({font_formats:"Verdana=verdana,geneva,sans-serif;宋体=宋体;黑体=黑体;仿宋_GB2312=仿宋_GB2312;楷体_GB2312=楷体_GB2312;隶书=隶书;幼圆=幼圆;微软雅黑=microsoft yahei;",selector:"#".concat(this.tinymceId),language:this.languageTypeList.zh,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:u,menubar:this.menubar,plugins:l,fontsize_formats:"12px 14px 16px 18px 20px 24px 36px",end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){t.value&&n.setContent(t.value),t.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",n.getContent())}))},setup:function(e){e.on("KeyDown",(function(e){if(e.ctrlKey&&83===(e.which?e.which:e.keyCode))return t.$emit("contentSave"),e.preventDefault(),!1}),!0),e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))},convert_urls:!1})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach((function(e){return window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'.concat(e.url,'" >'))}))}}},b=(n("7200"),Object(s.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[n("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),n("div",{staticClass:"editor-custom-btn-container"},[n("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:e.imageSuccessCBK}})],1)])}),[],!1,null,"01612009",null));t.a=b.exports},"3bc0":function(e,t,n){"use strict";n("8637")},7200:function(e,t,n){"use strict";n("92db")},8637:function(e,t,n){},"92db":function(e,t,n){},"9dac":function(e,t,n){"use strict";n.r(t);n("8e6e"),n("ac6a"),n("456d"),n("20d6");var i=n("ade3"),r=n("5880");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var a={computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.mapGetters)(["permissionToken"])),inject:["imgMultipleList","hideUploadList"],props:{prop:void 0,disabled:!1,type:"img"},name:"upload",data:function(){return{uploadType:{img:".jpg,.jpeg,.bmp,.png,.gif"},dialogPreviewImageUrl:"",dialogPreviewVisible:!1}},created:function(){},methods:{changeImgList:function(e,t,n){var i=this.imgMultipleList[t].findIndex((function(e){return e.sign===n}));i>-1?this.imgMultipleList[t].splice(i,1):this.imgMultipleList[t].push({url:e,sign:n}),this.hideUploadList[t]=this.imgMultipleList[t].length>=1},imageUploadError:function(e,t,n){this.$message.error("上传错误,请联系管理员")},imageBeforeRemove:function(e,t,n){this.imgMultipleList[n].length&&this.changeImgList(e.url,n,e.sign)},imageUploadSuccess:function(e,t,n,i){e&&this.changeImgList(e.url,i,t.uid)},imageDialogPreview:function(e){this.dialogPreviewImageUrl=e.url,this.dialogPreviewVisible=!0}}},s=(n("3bc0"),n("0c7c")),c=Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-upload",{class:{hideImgListCon:e.hideUploadList[e.prop]},attrs:{"file-list":e.imgMultipleList[e.prop],data:{model:e.userInfo.usermodel.join(",")},"with-credentials":!0,"on-remove":function(t,n){return e.imageBeforeRemove(t,n,e.prop)},"on-success":function(t,n,i){return e.imageUploadSuccess(t,n,i,e.prop)},"on-error":e.imageUploadError,limit:1,disabled:e.disabled,"list-type":"picture-card",action:e.baseURL+"/cms/file",headers:{Authorization:e.permissionToken.access_token},accept:e.uploadType[e.type],"on-preview":e.imageDialogPreview}},[n("i",{staticClass:"el-icon-plus"})]),n("el-dialog",{attrs:{visible:e.dialogPreviewVisible},on:{"update:visible":function(t){e.dialogPreviewVisible=t}}},[n("img",{attrs:{width:"100%",src:e.dialogPreviewImageUrl,alt:""}})])],1)}),[],!1,null,"e7b13a6a",null);t.default=c.exports},c68a:function(e,t,n){"use strict";n.r(t);var i=n("3330"),r=(n("5880"),{name:"publicForm",inject:["$provide"],components:{Upload:n("9dac").default,Tinymce:i.a},created:function(){this.formSlots=this.$provide.formColumn.filter((function(e){return e.formslot}))},data:function(){return{formSlots:[]}},uploadBefore:function(e,t,n,i){i.data.model=this.$provide.currentModel||this.userInfo.usermodel.join(","),t()},computed:{},methods:{}}),o=n("0c7c"),a=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("avue-form",{ref:"avueForm",attrs:{"upload-before":e.uploadBefore,option:e.$provide.formOptions},on:{submit:function(t,n){return e.$provide.formSave(t,n)}},scopedSlots:e._u([e._l(e.formSlots,(function(t){return{key:""+t.prop,fn:function(i){return e._t(""+t.prop,["editor"===t.$type?[n("tinymce",{model:{value:e.$provide.sendFormData.content,callback:function(t){e.$set(e.$provide.sendFormData,"content",t)},expression:"$provide.sendFormData.content"}})]:e._e()],{row:i.row})}}})),{key:"menuForm",fn:function(t){return e._t("menuForm",[n("el-button",{attrs:{type:"info"}},[e._v("取消")])],{row:t.row})}}],null,!0),model:{value:e.$provide.sendFormData,callback:function(t){e.$set(e.$provide,"sendFormData",t)},expression:"$provide.sendFormData"}})}),[],!1,null,"33cd676a",null);t.default=a.exports},cb8f:function(e,t,n){"use strict";n("dfa3")},de10:function(e,t,n){"use strict";n.r(t);n("8e6e"),n("ac6a"),n("456d");var i=n("ade3"),r=n("e49c"),o=(n("5880"),n("7a36"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={mixins:[r.a],data:function(){return{selectForm:{type:"updateUserForm",changePasswordForm:[{label:"旧密码",prop:"old_password"},{label:"新密码",prop:"new_password"},{label:"确认密码",prop:"confirm_password"}],updateUserForm:[{label:"昵称",prop:"nickname"},s({label:"头像",prop:"avatar",type:"upload"},this.uploadConfig),{label:"邮箱",prop:"email"},{label:"个性签名",prop:"signature",type:"textarea",minRows:2}]}}},computed:{formColumn:function(){var e=this.selectForm.type;return this.selectForm[e]}},created:function(){this.initFormMethods(this.userInfo)},methods:{rowSaveApi:function(e){return"updateUserForm"===this.selectForm.type?o.a.self(e):o.a.password(e)},rowSaveCallback:function(e){var t=e.nickname,n=e.avatar,i=e.email;this.$store.commit("SET_USER_INFO",{nickname:t,avatar:n,email:i})}}},l=n("0c7c"),u=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-tabs",{model:{value:e.selectForm.type,callback:function(t){e.$set(e.selectForm,"type",t)},expression:"selectForm.type"}},[n("el-tab-pane",{attrs:{label:"信息管理",name:"updateUserForm"}}),n("el-tab-pane",{attrs:{label:"密码管理",name:"changePasswordForm"}})],1),n("public-form")],1)}),[],!1,null,null,null);t.default=u.exports},dfa3:function(e,t,n){},e49c:function(e,t,n){"use strict";n("8e6e"),n("ac6a"),n("456d");var i=n("ade3"),r=n("5880"),o=n("c68a");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a={provide:function(){return{$provide:this}},data:function(){return{sendFormData:{},baseFormOptions:{emptyBtn:!1,submitText:"保存"}}},components:{publicForm:o.default},computed:s(s({},Object(r.mapGetters)(["avueConfig"])),{},{formOptions:function(){this.formConfig&&Object.assign(this.baseFormOptions,this.formConfig);var e=this.initFormRules(this.formColumn);return s(s({},this.baseFormOptions),{},{column:e,size:this.avueConfig.size})}}),created:function(){var e=this;this.formGetApi&&this.formGetApi().then((function(t){e.initFormMethods(t)}))},methods:{confirmHtmlWrap:function(e){return['确认<strong style="color:#f56c6c;">'.concat(e,"？</strong>"),"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}]},initFormMethods:function(e){var t=this;this.formColumn.map((function(n){var i=n.prop,r=e[i];t.sendFormData[i]=r}))},formSave:function(e,t){var n=this,i=this.needSendFormData(e);this.rowSaveApi(i).then((function(i){n.$message.success(i.message),n.rowSaveCallback&&n.rowSaveCallback(e),t&&t()})).catch((function(e){t&&t()}))},formCancel:function(){}}}}}]);